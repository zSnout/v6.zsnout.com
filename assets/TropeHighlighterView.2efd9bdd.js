import{g as M,s as _}from"./cookie.648245ab.js";import{d as T,r as y,m as w,z as C,y as S,o as G,e as K,w as s,D as N,h as P,N as D,b as v,j as H,B as R,C as Y,_ as Z}from"./index.075875a4.js";const E=i=>(R("data-v-4b3fdba6"),i=i(),Y(),i),I=H("Highlight Tropes"),L=E(()=>v("link",{href:"https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@500&display=swap",rel:"stylesheet"},null,-1));var V=T({__name:"TropeHighlighterView",setup(i){let b=y(null),x={Etnachta:"\u05D1\u0591",SofPassuk:"\u05E1\u05BD",Segol:"\u05D1\u0592",Shalshelet:"\u05D1\u0593",ZakefKatan:"\u05D1\u0594",ZakefGadol:"\u05D1\u0595",Tifcha:"\u05D1\u0596",Rivia:"\u05D1\u0597",Zarka:"\u05D1\u05AE",Pashta:"\u05D1\u0599",Yetiv:"\u05D1\u059A",Tevir:"\u05D1\u059B",Pazer:"\u05D1\u05A1",QarneFarah:"\u05D1\u059F",TelishaGedola:"\u05D1\u05A0",Geresh:"\u05D1\u059C",Gershayim:"\u05D1\u059E",Mercha:"\u05D1\u05A5",Munach:"\u05D1\u05A3",Mahpach:"\u05D1\u05A4",Darga:"\u05D1\u05A7",Kadma:"\u05D1\u05A8",TelishaKetana:"\u05D1\u05A9",MerchaKefula:"\u05D1\u05A6",YerachBenYomo:"\u05D1\u05AA"};for(let[a,e]of Object.entries(x))x[a]=e[1];let p=Object.entries(x);function m(a){let e=-1,d=null;for(const[n,o]of p)a.indexOf(o)>e&&(e=a.indexOf(o),d=n);return d}function k(a){a.preventDefault();let e=a.clipboardData;if(!e)return;let d=e.getData("text/plain");if(!d)return;let n=document.getSelection();if(!n)return;let o=n.getRangeAt(0);o.deleteContents();let c=document.createTextNode(d);o.insertNode(c),o.selectNodeContents(c),o.collapse(!1),n.removeAllRanges(),n.addRange(o),h(),u()}function u(){if(!b.value)return;let a=[...b.value.childNodes].map(t=>(t.textContent||"").trim()).join(" ");if(!a)return;let e=document.createElement("span");e.textContent=a.trim().replace(/\s+/g," ");let c=e.innerHTML.split(" ").map(t=>({word:t,trope:m(t)})).map(({word:t,trope:l},r,g)=>l=="Munach"&&g[r+1].trope?{word:t,trope:`Munach${g[r+1].trope}`}:{word:t,trope:l}).map(({word:t,trope:l})=>{let r=document.createElement("span");return r.textContent=t,r.classList.add(l),r}),f=[c[0]];for(let t of c.slice(1))f.push(" ",t);b.value.replaceChildren(...f)}function h(){!b.value||b.value.classList.toggle("empty",!!b.value.textContent)}return w(()=>{h(),document.documentElement.classList.add("theme-light"),M("hasVisitedTropeHighlighter")!="1"&&C("Hey! If you're using dark mode, you might notice that our trope highlighter always uses light mode. This is to allow for a better printing and screenshot experience by default.").then(()=>_("hasVisitedTropeHighlighter","1"))}),S(()=>document.documentElement.classList.remove("theme-light")),(a,e)=>(G(),K(N,{"explicit-height":""},{nav:s(()=>[P(D,{onClick:u},{default:s(()=>[I]),_:1})]),default:s(()=>[L,v("div",{ref_key:"textbox",ref:b,class:"textbox empty",contenteditable:"",role:"textbox",onInput:h,onPaste:k},null,544)]),_:1}))}});var F=Z(V,[["__scopeId","data-v-4b3fdba6"]]);export{F as default};
